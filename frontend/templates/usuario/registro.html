{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    /* Estilos generales */
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    /* Contenedor del formulario */
    #userForm {
        max-width: 400px;
        margin: 60px auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    /* Estilos para los elementos del formulario */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    button {
        width: 100%;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    button {
        background-color: #007bff;
        color: #fff;
        cursor: pointer;
    }

    button:hover {
        background-color: #0056b3;
    }
</style>

<div id="userForm">
    <h1>Crear Usuario</h1>
    <form action="{% url 'registroUsuarios' %}" method="post">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre">
        <label for="apellido">Apellido:</label>
        <input type="text" id="apellido" name="apellido">
        <label for="username">Usuario:</label>
        <input type="text" id="username" name="username">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email">
        <label for="comuna">Comuna:</label>
        <input type="text" id="comuna" name="comuna">
        <label for="region">Regi칩n:</label>
        <input type="text" id="region" name="region">
        <label for="direccion">Direcci칩n:</label>
        <input type="text" id="direccion" name="direccion">
        <label for="telefono">Tele패fono:</label>
        <input type="text" id="telefono" name="telefono">
        <label for="password">Contrase침a:</label>
        <input type="password" id="password" name="password">
        <button type="button" onclick="submitUser()">Crear Usuario</button>
    </form>
</div>

<script>
    function submitUser() {
        const data = {
            nombre: document.getElementById('nombre').value,
            apellido: document.getElementById('apellido').value,
            username: document.getElementById('username').value,
            email: document.getElementById('email').value,
            password: document.getElementById('password').value,
            direccion: document.getElementById('direccion').value,
            region: document.getElementById('region').value,
            comuna: document.getElementById('comuna').value,
            telefono: document.getElementById('telefono').value
        };

        fetch('/api/usuarios/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert('Usuario creado exitosamente!');
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    }
</script>
{% endblock %}